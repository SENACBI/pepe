<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"

      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <ui:composition template="/plantilla_paginas.xhtml">
        <ui:define name="body">

            <h2>Acompañamiento</h2>

            <h3>Fase</h3>

            <h:form id="formAcomp" style="overflow: scroll">

                <section class="Panel_scroll">

                    <h:selectOneMenu value="#{seguimientoController.idFase}">
                        <f:selectItem itemLabel="Seleccionar uno.." />
                        <f:selectItems value="#{seguimientoController.listFaseSelectOne}" 
                                       var="usuario" 
                                       itemLabel="#{usuario}" 
                                       itemValue="#{usuario}" />
                        <p:ajax event="change" 
                                update="formAcomp"/>
                    </h:selectOneMenu>

                    <h4>Tipo de criterio</h4>
                    <h:selectOneMenu id="idCri" value="#{seguimientoController.idTipoCriterio}" style="width: 25%">                        
                        <f:selectItem itemLabel="Seleccionar uno.." />
                        <f:selectItems value="#{seguimientoController.listaCriterioSelectOne}" 
                                       var="usuario" 
                                       itemValue="#{usuario.idTipoCriterio}" />
                        <p:ajax process="idCri"
                                update="formAcomp"
                                event="change"/>
                    </h:selectOneMenu>
                    <p></p>

                    <!--tabla para el primer tipo de criterio-->
                    <p:dataTable id="criterioTable1"
                                 var="acompañamiento"
                                 rendered="#{seguimientoController.renderTabla1()}"
                                 value="#{seguimientoController.listaItems}"
                                 rowKey="#{acompañamiento.idItemCriterio}"
                                 editable="true" 
                                 editMode="cell">

                        <p:column headerText="Descripción" style="width: 60%">   
                            <h:outputText  value="#{acompañamiento.idDescripcionCriterio1.descrpcion}"/>
                        </p:column>

                        <p:column headerText="Valoración">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{acompañamiento.valoracionItem}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu  id="valoracion" value="#{acompañamiento.valoracionItem}">
                                        <f:selectItem itemValue="Satisfactorio" itemLabel="Satisfactorio"  />
                                        <f:selectItem itemValue="Aceptable" itemLabel="Aceptable"  />
                                        <f:selectItem itemValue="Por mejorar" itemLabel="Por mejorar"  />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column headerText="Observaciones">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{acompañamiento.observacion}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputTextarea rows="2" value="#{acompañamiento.observacion}" 
                                                     style="width: 96%; resize: none" label="Observaciones"/>
                                </f:facet>
                            </p:cellEditor>                  
                        </p:column>

                    </p:dataTable>
                    <br></br>

                    <!--tabla para el 2 tipo de criterio-->
                    <p:dataTable id="criterioTable2"
                                 var="acompañamiento"
                                 rendered="#{seguimientoController.renderTabla2()}"
                                 value="#{seguimientoController.listaItems}"
                                 rowKey="#{acompañamiento.idItemCriterio}"
                                 editable="true" 
                                 editMode="cell">

                        <p:column headerText="Descripción" style="width: 60%">   
                            <h:outputText  value="#{acompañamiento.idDescripcionCriterio2.descrpcion}"/>
                        </p:column>

                        <p:column headerText="Valoración">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <p:outputLabel value="#{acompañamiento.valoracionItem}" />
                                </f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu id="valoracion" value="#{acompañamiento.valoracionItem}">
                                        <f:selectItem itemLabel="Satisfactorio" itemValue="Satisfactorio" />
                                        <f:selectItem itemLabel="Aceptable" itemValue="Aceptable" />
                                        <f:selectItem itemLabel="Por mejorar" itemValue="Por mejorar" />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column headerText="Observaciones">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{acompañamiento.observacion}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputTextarea rows="2" value="#{acompañamiento.observacion}" 
                                                     style="width: 96%; resize: none" label="Observaciones"/>
                                </f:facet>
                            </p:cellEditor>                  
                        </p:column>

                    </p:dataTable>
                    <br></br>

                    <!--tabla para el 3 tipo de criterio-->

                    <p:dataTable id="criterioTable3"
                                 var="acompañamiento"
                                 rendered="#{seguimientoController.renderTabla3()}"
                                 value="#{seguimientoController.listaItems}"
                                 rowKey="#{acompañamiento.idItemCriterio}"
                                 editable="true" 
                                 editMode="cell">

                        <p:column headerText="Descripción" style="width: 60%">   
                            <h:outputText  value="#{acompañamiento.idDescripcionCriterio3.descrpcion}"/>
                        </p:column>

                        <p:column headerText="Valoración">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <p:outputLabel value="#{acompañamiento.valoracionItem}" />
                                </f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu id="valoracion" value="#{acompañamiento.valoracionItem}">
                                        <f:selectItem itemLabel="Satisfactorio" itemValue="Satisfactorio" />
                                        <f:selectItem itemLabel="Aceptable" itemValue="Aceptable" />
                                        <f:selectItem itemLabel="Por mejorar" itemValue="Por mejorar" />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column headerText="Observaciones">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{acompañamiento.observacion}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputTextarea rows="2" value="#{acompañamiento.observacion}" 
                                                     style="width: 96%; resize: none" label="Observaciones"/>
                                </f:facet>
                            </p:cellEditor>                  
                        </p:column>

                    </p:dataTable>
                    <br></br>

                    <!--tabla para el 4 tipo de criterio-->
                    <p:dataTable id="criterioTable4"
                                 var="acompañamiento"
                                 rendered="#{seguimientoController.renderTabla4()}"
                                 value="#{seguimientoController.listaItems}"
                                 rowKey="#{acompañamiento.idItemCriterio}"
                                 editable="true" 
                                 editMode="cell">

                        <p:column headerText="Descripción" style="width: 60%">   
                            <h:outputText  value="#{acompañamiento.idDescripcionCriterio4.descrpcion}"/>
                        </p:column>

                        <p:column headerText="Valoración">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <p:outputLabel value="#{acompañamiento.valoracionItem}" />
                                </f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu id="valoracion" value="#{acompañamiento.valoracionItem}">
                                        <f:selectItem itemLabel="Seleccionar uno.." />
                                        <f:selectItem itemLabel="Satisfactorio" itemValue="Satisfactorio" />
                                        <f:selectItem itemLabel="Aceptable" itemValue="Aceptable" />
                                        <f:selectItem itemLabel="Por mejorar" itemValue="Por mejorar" />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column headerText="Observaciones">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{acompañamiento.observacion}"/>
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputTextarea rows="2" value="#{acompañamiento.observacion}" 
                                                     style="width: 96%; resize: none" label="Observaciones"/>
                                </f:facet>
                            </p:cellEditor>                  
                        </p:column>

                    </p:dataTable>

                    <h3>Conclusiones</h3>
                    <textarea class="form-00" value="#{seguimientoController.acompanamientoActual.conclusiones}"
                              rows="5" style="width: 99%; resize: none">
                    </textarea>
                    <br></br>
                    <p:commandButton class="Guardar" process="@this" update="formAcomp" value="guardar" 
                                     action="#{seguimientoController.addAcompanamiento()}"/>

                </section>

            </h:form>

        </ui:define>
    </ui:composition>
</html>