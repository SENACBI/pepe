<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"

      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <ui:composition template="/html_plantillas/plantilla_paginas.xhtml">
        <ui:define name="body">
            <h2>Acompañamiento</h2>

            <section class="Panel_scroll">
                <h:form id="formInicio" style="overflow: scroll">

                    <h3>Fase</h3>
                    <h:selectOneMenu value="#{seguimientoController.idFase}">
                        <f:selectItem itemLabel="Seleccionar uno.." />
                        <f:selectItems value="#{seguimientoController.listFaseSelectOne}" 
                                       var="usuario" 
                                       itemLabel="#{usuario}" 
                                       itemValue="#{usuario}" />
                        <p:ajax event="change" 
                                update=":formInicio"/>
                    </h:selectOneMenu>

                    <h4>Tipo de criterio</h4>
                    <h:selectOneMenu id="idCri" value="#{seguimientoController.idTipoCriterio}" style="width: 25%">                        
                        <f:selectItem itemLabel="Seleccionar uno.." />
                        <f:selectItems value="#{seguimientoController.listaCriterioSelectOne}" 
                                       var="usuario" 
                                       itemValue="#{usuario.idTipoCriterio}" />
                        <p:ajax process="idCri"
                                update="formInicio"
                                event="change"/>
                    </h:selectOneMenu> <!-- la opcion "Acompañamiento durante el cierre del proyecto" y "Seleccionar uno.."
                                       desestabiliza la tabla-->

                    <br></br>

                    <!--tabla para el primer tipo de criterio-->
                    <p:dataTable id="criterioTable1"
                                 var="acompañamiento"
                                 rendered="#{seguimientoController.renderTabla1()}"
                                 value="#{seguimientoController.listaItems}"
                                 rowKey="#{acompañamiento.idItemCriterio}"
                                 editable="true" 
                                 editMode="cell">

                        <p:column headerText="Descripción" style="width: 60%">   
                            <h:outputText  value="#{acompañamiento.idDescripcionCriterio1.descrpcion}"/>
                        </p:column>


                        <p:column headerText="Valoración">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{acompañamiento.valoracionItem}" /></f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu  id="valoracion" value="#{acompañamiento.valoracionItem}">
                                        <f:selectItem itemValue="Satisfactorio" itemLabel="Satisfactorio"  />
                                        <f:selectItem itemValue="Aceptable" itemLabel="Aceptable"  />
                                        <f:selectItem itemValue="Por mejorar" itemLabel="Por mejorar"  />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column headerText="Observaciones">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{acompañamiento.observacion}" /></f:facet>
                                <f:facet name="input"><p:inputText value="#{acompañamiento.observacion}" style="width:96%" label="Observaciones"/></f:facet>
                            </p:cellEditor>                  
                        </p:column>



                    </p:dataTable>

                    <br></br>
                    <!--tabla para el 2 tipo de criterio-->
                    <p:dataTable id="criterioTable2"
                                 var="acompañamiento"
                                 rendered="#{seguimientoController.renderTabla2()}"
                                 value="#{seguimientoController.listaItems}"
                                 rowKey="#{acompañamiento.idItemCriterio}"
                                 editable="true" 
                                 editMode="cell">

                        <p:column headerText="Descripción" style="width: 60%">   
                            <h:outputText  value="#{acompañamiento.idDescripcionCriterio2.descrpcion}"/>
                        </p:column>


                        <p:column headerText="Valoración">
                            <p:cellEditor>
                                <f:facet name="output"><p:outputLabel value="#{acompañamiento.valoracionItem}" /></f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu id="valoracion" value="#{acompañamiento.valoracionItem}">
                                        <f:selectItem itemLabel="Satisfactorio" itemValue="Satisfactorio" />
                                        <f:selectItem itemLabel="Aceptable" itemValue="Aceptable" />
                                        <f:selectItem itemLabel="Por mejorar" itemValue="Por mejorar" />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>



                        <p:column headerText="Observaciones">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{acompañamiento.observacion}" /></f:facet>
                                <f:facet name="input"><p:inputText value="#{acompañamiento.observacion}" style="width:96%" label="Observaciones"/></f:facet>
                            </p:cellEditor>                  
                        </p:column>



                    </p:dataTable>

                    <br></br>
                    <!--tabla para el 3 tipo de criterio-->
                    <p:dataTable id="criterioTable3"
                                 var="acompañamiento"
                                 rendered="#{seguimientoController.renderTabla3()}"
                                 value="#{seguimientoController.listaItems}"
                                 rowKey="#{acompañamiento.idItemCriterio}"
                                 editable="true" 
                                 editMode="cell">

                        <p:column headerText="Descripción" style="width: 60%">   
                            <h:outputText  value="#{acompañamiento.idDescripcionCriterio3.descrpcion}"/>
                        </p:column>


                        <p:column headerText="Valoración">
                            <p:cellEditor>
                                <f:facet name="output"><p:outputLabel value="#{acompañamiento.valoracionItem}" /></f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu id="valoracion" value="#{acompañamiento.valoracionItem}">
                                        <f:selectItem itemLabel="Satisfactorio" itemValue="Satisfactorio" />
                                        <f:selectItem itemLabel="Aceptable" itemValue="Aceptable" />
                                        <f:selectItem itemLabel="Por mejorar" itemValue="Por mejorar" />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>



                        <p:column headerText="Observaciones">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{acompañamiento.observacion}" /></f:facet>
                                <f:facet name="input"><p:inputText value="#{acompañamiento.observacion}" style="width:96%" label="Observaciones"/></f:facet>
                            </p:cellEditor>                  
                        </p:column>



                    </p:dataTable>
                    <br></br>
                    <!--tabla para el 4 tipo de criterio-->

                    <p:dataTable id="criterioTable4"
                                 var="acompañamiento"
                                 rendered="#{seguimientoController.renderTabla4()}"
                                 value="#{seguimientoController.listaItems}"
                                 rowKey="#{acompañamiento.idItemCriterio}"
                                 editable="true" 
                                 editMode="cell">

                        <p:column headerText="Descripción" style="width: 60%">   
                            <h:outputText  value="#{acompañamiento.idDescripcionCriterio4.descrpcion}"/>
                        </p:column>


                        <p:column headerText="Valoración">
                            <p:cellEditor>
                                <f:facet name="output"><p:outputLabel value="#{acompañamiento.valoracionItem}" /></f:facet>
                                <f:facet name="input">
                                    <h:selectOneMenu id="valoracion" value="#{acompañamiento.valoracionItem}">
                                        <f:selectItem itemLabel="Seleccionar uno.." />
                                        <f:selectItem itemLabel="Satisfactorio" itemValue="Satisfactorio" />
                                        <f:selectItem itemLabel="Aceptable" itemValue="Aceptable" />
                                        <f:selectItem itemLabel="Por mejorar" itemValue="Por mejorar" />
                                    </h:selectOneMenu>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>



                        <p:column headerText="Observaciones">
                            <p:cellEditor>
                                <f:facet name="output"><h:outputText value="#{acompañamiento.observacion}" /></f:facet>
                                <f:facet name="input"><p:inputText value="#{acompañamiento.observacion}" style="width:96%" label="Observaciones"/></f:facet>
                            </p:cellEditor>                  
                        </p:column>



                    </p:dataTable>
                    <h3>Conclusiones</h3>
                    <textarea class="form-00" value="#{seguimientoController.acompanamientoActual.conclusiones}" >
                    </textarea>
                    <p:commandButton process="@this formInicio" update="formInicio" value="guardar" action="#{seguimientoController.addAcompanamiento()}"/>

                </h:form>
            </section>
            
        </ui:define>
    </ui:composition>
</html>